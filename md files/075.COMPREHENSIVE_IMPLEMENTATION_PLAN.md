# ?? COMPREHENSIVE FEATURE IMPLEMENTATION PLAN

## ?? Overview
This document outlines the complete implementation plan for all requested features in the DJ Booking System.

---

## ? PHASE 1: Connection & UI Improvements (Priority: CRITICAL)

### 1.1 Remove Debug Message Box
- **Location**: `App.xaml.cs` after splash screen
- **Action**: Remove any MessageBox.Show() calls after splash
- **Status**: ? Pending

### 1.2 Fix Login Window Layout
- **Issues**:
  - Login button partially obstructed
  - Username/Password textboxes different sizes
  - Text formatting in boxes
  - Need centering
- **Files**: `LoginWindow.xaml`
- **Status**: ? Pending

### 1.3 Add Auto Login Feature
- **Requirements**:
  - New "Auto Login" checkbox
  - Only enabled when "Remember Me" is checked
  - Auto-bypass login screen when checked
  - Disabled after logout button pressed
- **Files**: `LoginWindow.xaml`, `LoginWindow.xaml.cs`, `Utilities/LocalStorage.cs`
- **Status**: ? Pending

### 1.4 Add 4 Claude Indicators
- **Services to Monitor**:
  1. **Cosmos** - Azure Cosmos DB
  2. **LPM.fm** - Live Party Music website
  3. **Booking** - RadioBOSS Control (https://c40.radioboss.fm/u/98)
  4. **Live Status** - RadioBOSS Stream API (https://c40.radioboss.fm/api/info/98?key=8VTO5355BZ5X)
- **Implementation**:
  - ? ClaudeIndicator control updated with labels
  - ? ConnectionService created
  - ? Add to SplashScreen
  - ? Add to LoginWindow
  - ? Add to MainWindow (all tabs)
  - ? Add to all admin windows
- **Status**: ?? Partially Complete

### 1.5 Connection Checking Logic
- **Splash Screen**:
  - All 4 must be GREEN before 100% progress
  - Block progress until all connected
  - Show yellow (connecting) ? green (connected) / red (failed)
- **Login Screen**:
  - Default: All green (from splash success)
  - Update if connection lost
- **All Other Screens**:
  - Periodic connection checks (every 30 seconds)
  - Update indicators in real-time
- **Files**: `ConnectionService.cs`, `SplashScreen.xaml.cs`, `LoginWindow.xaml.cs`
- **Status**: ? Pending

---

## ? PHASE 2: Admin Features (Priority: HIGH)

### 2.1 Venue Management Enhancement
- **Current Status**: ? Exists
- **Required Enhancements**:
  - ? Create/Edit/Delete venues
  - ? Weekly schedule per venue
  - ? Week indicators (Week 1-4 of month)
  - ? Only show open days on roster
  - ? 1-hour time slot increments (24-hour format)
  - ? Red = Booked (show DJ name & time)
  - ? Green = Available
  - ? Discord notifications on booking
  - ? Copy DJ streaming link (admin/owner only)
  - ? Reset/Clear bookings for specific day

### 2.2 Booking Management Enhancement
- **Current Status**: ? Exists
- **Required Enhancements**:
  - ? Create manual bookings (admin)
  - ? View/Edit/Delete any booking
  - ? Filter by venue
  - ? Clear entire day schedule with preview
  - ? Discord webhook integration

### 2.3 New Admin Menu Items
- **Required Additions**:
  - ? **Manage Venues** ? (exists)
  - ? **Manage Bookings** ? (exists)
  - ? **Manage Users** ? (exists)
  - ? **ALL DJ's Streaming Links**
    - Add/View/Listen/Edit/Copy/Delete
    - System-wide database
  - ? **Streaming Links Manager**
    - Add/View/Listen/Edit/Copy/Delete/Upload
    - Update all users' radio streamer database
  - ? **Users Management**
    - Create/View/Edit/Delete
    - Mute (with reason)
    - Ban (with reason)
    - Unmute/Unban
  - ? **Error Reports**
    - View all error reports for all users
    - Copy errors
    - Mark as resolved (with date/timestamp)

### 2.4 Permissions System
- **Required**:
  - ? Discord-style permissions page
  - ? Individual user permissions
  - ? Role-based permissions (DJ, Venue Owner, Manager, SysAdmin)
  - ? Manager restrictions:
    - ? Cannot promote users to Manager
    - ? Cannot access SysAdmin features
  - ? SysAdmin capabilities:
    - ? Can promote users to Manager
    - ? Full system access

---

## ? PHASE 3: RadioBOSS Integration (Priority: MEDIUM)

### 3.1 Enhanced RadioBOSS Control
- **Current Status**: ? Basic panel exists
- **Enhancements**:
  - ? Admin-only controls (Manager/SysAdmin)
  - ? Regular users: View-only + Play/Pause (local only)
  - ? Stream management
  - ? Playlist management

### 3.2 Streaming Links Database
- **Requirements**:
  - ? System-wide DJ streaming links
  - ? Admin can add/edit/delete for any DJ
  - ? Regular DJs can only manage their own links
  - ? Listen/test links before saving
  - ? Copy to clipboard functionality

---

## ? PHASE 4: Weekly Schedule System (Priority: HIGH)

### 4.1 Week Indicator System
- **Requirements**:
  - Show week 1-4 of current month
  - Each venue can have different hours each day
  - Example: CANDY LAND
    - Monday: CLOSED
    - Tuesday: OPEN (20:00-02:00)
    - Wednesday-Friday: CLOSED
    - Saturday: OPEN (20:00-02:00)
    - Sunday: CLOSED

### 4.2 Time Slot Display
- **Requirements**:
  - 1-hour increments (24-hour format)
  - Only show slots for open days
  - Color coding:
    - ?? Green = Available
    - ?? Red = Booked (with DJ name & time)
  - Click to book (for available slots)
  - Click to view details (for booked slots)

### 4.3 Booking Interface
- **Requirements**:
  - Visual calendar/grid view
  - Filter by venue
  - Filter by week
  - Quick booking from available slots
  - Conflict detection

---

## ? PHASE 5: User Management System (Priority: MEDIUM)

### 5.1 User CRUD Operations
- **Requirements**:
  - ? Create new users (admin only)
  - ? View all users
  - ? Edit user details
  - ? Delete users (soft delete)
  - ? Role assignment

### 5.2 User Moderation
- **Mute System**:
  - ? Mute user (with reason)
  - ? Unmute user
  - ? View mute history
  - ? Mute duration (temporary/permanent)
- **Ban System**:
  - ? Ban user (with reason)
  - ? Unban user
  - ? View ban history
  - ? Ban duration (temporary/permanent)

### 5.3 Permissions Editor
- **Requirements**:
  - ? Discord-style permissions interface
  - ? Toggle switches for each permission
  - ? Permission categories:
    - General (view bookings, create bookings, etc.)
    - Venue Management (if venue owner)
    - Admin (for Manager/SysAdmin)
  - ? Role-based defaults
  - ? Individual overrides

---

## ? PHASE 6: Error Reporting System (Priority: LOW)

### 6.1 Error Logging
- **Requirements**:
  - ? Automatic error capture
  - ? Store in database
  - ? Include:
    - User ID
    - Timestamp
    - Error message
    - Stack trace
    - Application state

### 6.2 Error Management
- **Admin Features**:
  - ? View all error reports
  - ? Filter by user/date/type
  - ? Copy error details
  - ? Mark as resolved
  - ? Resolution notes
  - ? Resolved date/timestamp

---

## ?? Implementation Priority Matrix

| Priority | Phase | Est. Time | Dependencies |
|----------|-------|-----------|--------------|
| ?? CRITICAL | Phase 1 (Connection & UI) | 2-3 days | None |
| ?? HIGH | Phase 2 (Admin Features) | 3-4 days | Phase 1 |
| ?? HIGH | Phase 4 (Weekly Schedule) | 2-3 days | Phase 2 |
| ?? MEDIUM | Phase 3 (RadioBOSS) | 2 days | Phase 1 |
| ?? MEDIUM | Phase 5 (User Management) | 3-4 days | Phase 2 |
| ? LOW | Phase 6 (Error Reporting) | 1-2 days | Phase 5 |

**Total Estimated Time**: 13-18 days

---

## ??? File Structure

```
DJBookingSystem/
??? Windows/
?   ??? SplashScreen.xaml/cs (? Exists - needs 4 Claudes)
?   ??? LoginWindow.xaml/cs (? Exists - needs fixes + Auto Login + 4 Claudes)
?   ??? MainWindow.xaml/cs (? Exists - needs 4 Claudes on all tabs)
?   ??? AdminVenueManagementWindow.xaml/cs (? Exists - needs enhancements)
?   ??? AdminBookingManagementWindow.xaml/cs (? Exists - needs enhancements)
?   ??? UserManagementWindow.xaml/cs (? Create new)
?   ??? PermissionsEditorWindow.xaml/cs (? Create new)
?   ??? StreamingLinksWindow.xaml/cs (? Create new)
?   ??? ErrorReportsWindow.xaml/cs (? Create new)
??? Controls/
?   ??? ClaudeIndicator.xaml/cs (? Complete with labels)
??? Services/
?   ??? ConnectionService.cs (? Complete)
?   ??? CosmosDbService.cs (? Exists)
?   ??? DiscordWebhookService.cs (? Enhance)
?   ??? ErrorLoggingService.cs (? Create new)
?   ??? PermissionsService.cs (? Create new)
??? Models/
?   ??? User.cs (? Exists - needs Permission properties)
?   ??? Venue.cs (? Exists - needs weekly schedule)
?   ??? Booking.cs (? Exists)
?   ??? StreamingLink.cs (? Create new)
?   ??? ErrorReport.cs (? Create new)
?   ??? UserPermissions.cs (? Create new)
??? Utilities/
    ??? LocalStorage.cs (? Exists - needs Auto Login support)
    ??? PermissionsHelper.cs (? Create new)
```

---

## ?? Permissions Hierarchy

```
???????????????????????????????????????
?          SysAdmin (Full Access)     ?
?  • All admin features               ?
?  • Promote to Manager               ?
?  • System-wide changes              ?
???????????????????????????????????????
             ?
             ?
???????????????????????????????????????
?        Manager (Admin Features)     ?
?  • Manage venues                    ?
?  • Manage bookings                  ?
?  • Manage users (but NOT promote)   ?
?  • View error reports               ?
?  • RadioBOSS control                ?
???????????????????????????????????????
             ?
             ?
???????????????????????????????????????
?      Venue Owner (Venue Features)   ?
?  • Manage own venues                ?
?  • View venue bookings              ?
?  • Clear day schedules (own venues) ?
?  • Copy DJ links (own venues)       ?
???????????????????????????????????????
             ?
             ?
???????????????????????????????????????
?           DJ (Basic Features)       ?
?  • Create bookings                  ?
?  • Edit own bookings                ?
?  • Delete own bookings              ?
?  • View bookings                    ?
?  • RadioBOSS view/play (local only) ?
???????????????????????????????????????
```

---

## ?? Next Steps

### Immediate Actions (Today):
1. ? Complete ClaudeIndicator with labels
2. ? Create ConnectionService
3. ? Remove debug MessageBox from App.xaml.cs
4. ? Fix LoginWindow layout issues
5. ? Add Auto Login feature

### Short-Term (This Week):
1. ? Add 4 Claudes to SplashScreen
2. ? Add 4 Claudes to LoginWindow
3. ? Update splash screen connection logic
4. ? Add 4 Claudes to MainWindow (all tabs)

### Medium-Term (Next Week):
1. ? Enhance AdminVenueManagementWindow
2. ? Enhance AdminBookingManagementWindow
3. ? Create UserManagementWindow
4. ? Create PermissionsEditorWindow

### Long-Term (Following Weeks):
1. ? Create StreamingLinksWindow
2. ? Create ErrorReportsWindow
3. ? Implement full permissions system
4. ? Testing and refinement

---

## ?? Important Notes

### Theme System
- ? **Static Screens**: SplashScreen, LoginWindow (hardcoded #00FF00)
- ? **Dynamic Screens**: All other windows use theme system
- ? **12 Themes**: 11 static + 1 animated (Rainbow)

### Connection Requirements
- **Splash Screen**: MUST wait for all 4 connections before 100%
- **All Screens**: 4 Claude indicators at top
- **Labels**: "Cosmos", "LPM.fm", "Booking", "Live Status"
- **Colors**: Green (connected), Red (disconnected), Yellow (connecting)

### Role Restrictions
- **Manager**: Cannot promote other users
- **SysAdmin**: Can promote users to Manager
- **Regular Users**: Limited to own bookings

---

**Version**: 1.0  
**Last Updated**: 2025-01-15  
**Status**: ?? Planning Complete - Ready for Implementation  
**Total Features**: 50+  
**Estimated Completion**: 13-18 days
