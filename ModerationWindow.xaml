<Window x:Class="DJBookingSystem.ModerationWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Moderation Panel" Height="700" Width="1100"
        WindowStartupLocation="CenterOwner"
        Background="#ECF0F1">
    <Grid>
        <TabControl Margin="10">
            <!-- User Reports Tab -->
            <TabItem Header="ðŸ“‹ User Reports">
                <Grid Margin="10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,10">
                        <Button Content="ðŸ”„ Refresh Reports"
                               Click="RefreshReports_Click"
                               Padding="10,5"
                               Background="#3498DB"
                               Foreground="White"
                               BorderThickness="0"
                               Cursor="Hand"/>
                        <CheckBox x:Name="ShowResolvedCheckBox"
                                 Content="Show Resolved"
                                 Margin="15,0,0,0"
                                 VerticalAlignment="Center"
                                 Checked="ShowResolved_Changed"
                                 Unchecked="ShowResolved_Changed"/>
                    </StackPanel>

                    <DataGrid x:Name="ReportsDataGrid"
                             Grid.Row="1"
                             AutoGenerateColumns="False"
                             IsReadOnly="True"
                             SelectionMode="Single"
                             CanUserAddRows="False"
                             CanUserDeleteRows="False"
                             GridLinesVisibility="Horizontal"
                             AlternatingRowBackground="#F8F9FA"
                             RowBackground="White"
                             HeadersVisibility="Column">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Reported User" Binding="{Binding ReportedUsername}" Width="120"/>
                            <DataGridTextColumn Header="Reporter" Binding="{Binding ReporterUsername}" Width="120"/>
                            <DataGridTextColumn Header="Reason" Binding="{Binding Reason}" Width="140"/>
                            <DataGridTextColumn Header="Details" Binding="{Binding Details}" Width="*"/>
                            <DataGridTextColumn Header="Date" Binding="{Binding ReportedAt, StringFormat='{}{0:MM/dd/yyyy HH:mm}'}" Width="130"/>
                            <DataGridCheckBoxColumn Header="Resolved" Binding="{Binding IsResolved}" Width="80"/>
                            <DataGridTemplateColumn Header="Actions" Width="200">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal">
                                            <Button Content="View"
                                                   Click="ViewReport_Click"
                                                   Tag="{Binding}"
                                                   Padding="8,3"
                                                   Margin="2"
                                                   Background="#3498DB"
                                                   Foreground="White"
                                                   BorderThickness="0"
                                                   Cursor="Hand"
                                                   FontSize="11"/>
                                            <Button Content="Resolve"
                                                   Click="ResolveReport_Click"
                                                   Tag="{Binding}"
                                                   Padding="8,3"
                                                   Margin="2"
                                                   Background="#27AE60"
                                                   Foreground="White"
                                                   BorderThickness="0"
                                                   Cursor="Hand"
                                                   FontSize="11"/>
                                        </StackPanel>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </TabItem>

            <!-- Banned Users Tab -->
            <TabItem Header="ðŸš· Banned Users">
                <Grid Margin="10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <Button Grid.Row="0" Content="ðŸ”„ Refresh Banned Users"
                           Click="RefreshBannedUsers_Click"
                           Padding="10,5"
                           Margin="0,0,0,10"
                           Background="#3498DB"
                           Foreground="White"
                           BorderThickness="0"
                           HorizontalAlignment="Left"
                           Cursor="Hand"/>

                    <DataGrid x:Name="BannedUsersDataGrid"
                             Grid.Row="1"
                             AutoGenerateColumns="False"
                             IsReadOnly="True"
                             SelectionMode="Single"
                             CanUserAddRows="False"
                             CanUserDeleteRows="False"
                             GridLinesVisibility="Horizontal"
                             AlternatingRowBackground="#F8F9FA"
                             RowBackground="White"
                             HeadersVisibility="Column">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Username" Binding="{Binding Username}" Width="150"/>
                            <DataGridTextColumn Header="Banned By" Binding="{Binding BannedBy}" Width="120"/>
                            <DataGridTextColumn Header="Ban Date" Binding="{Binding BannedAt, StringFormat='{}{0:MM/dd/yyyy HH:mm}'}" Width="130"/>
                            <DataGridTextColumn Header="Expires" Binding="{Binding BanExpiry, StringFormat='{}{0:MM/dd/yyyy HH:mm}'}" Width="130"/>
                            <DataGridTextColumn Header="Reason" Binding="{Binding BanReason}" Width="*"/>
                            <DataGridTemplateColumn Header="Actions" Width="120">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Button Content="ðŸ”“ Unban"
                                               Click="UnbanUser_Click"
                                               Tag="{Binding Username}"
                                               Padding="8,3"
                                               Background="#27AE60"
                                               Foreground="White"
                                               BorderThickness="0"
                                               Cursor="Hand"
                                               FontSize="11"/>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </TabItem>

            <!-- Muted Users Tab -->
            <TabItem Header="ðŸ”‡ Muted Users">
                <Grid Margin="10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <Button Grid.Row="0" Content="ðŸ”„ Refresh Muted Users"
                           Click="RefreshMutedUsers_Click"
                           Padding="10,5"
                           Margin="0,0,0,10"
                           Background="#3498DB"
                           Foreground="White"
                           BorderThickness="0"
                           HorizontalAlignment="Left"
                           Cursor="Hand"/>

                    <DataGrid x:Name="MutedUsersDataGrid"
                             Grid.Row="1"
                             AutoGenerateColumns="False"
                             IsReadOnly="True"
                             SelectionMode="Single"
                             CanUserAddRows="False"
                             CanUserDeleteRows="False"
                             GridLinesVisibility="Horizontal"
                             AlternatingRowBackground="#F8F9FA"
                             RowBackground="White"
                             HeadersVisibility="Column">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Username" Binding="{Binding Username}" Width="150"/>
                            <DataGridTextColumn Header="Muted By" Binding="{Binding MutedBy}" Width="120"/>
                            <DataGridTextColumn Header="Mute Date" Binding="{Binding MutedAt, StringFormat='{}{0:MM/dd/yyyy HH:mm}'}" Width="130"/>
                            <DataGridTextColumn Header="Expires" Binding="{Binding MuteExpiry, StringFormat='{}{0:MM/dd/yyyy HH:mm}'}" Width="130"/>
                            <DataGridTemplateColumn Header="Actions" Width="120">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Button Content="ðŸ”Š Unmute"
                                               Click="UnmuteUser_Click"
                                               Tag="{Binding Username}"
                                               Padding="8,3"
                                               Background="#27AE60"
                                               Foreground="White"
                                               BorderThickness="0"
                                               Cursor="Hand"
                                               FontSize="11"/>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </TabItem>
        </TabControl>
    </Grid>
</Window>
