<UserControl x:Class="DJBookingSystem.Views.Radio.RadioPlayerView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d" 
             d:DesignHeight="700" d:DesignWidth="1160"
             Background="Black">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <!-- Player Controls & Upload -->
            <RowDefinition Height="*"/>
            <!-- Station Grid -->
        </Grid.RowDefinitions>

        <!-- ==================== PLAYER CONTROLS SECTION ==================== -->
        <Border Grid.Row="0" 
                Background="#000000" 
                BorderBrush="#00FF00" 
                BorderThickness="2" 
                CornerRadius="8" 
                Margin="20,20,20,10"
                Padding="20">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <!-- Now Playing & Controls -->
                    <RowDefinition Height="Auto"/>
                    <!-- Upload Section -->
                </Grid.RowDefinitions>

                <!-- Now Playing & Playback Controls -->
                <Grid Grid.Row="0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <!-- Station Name -->
                        <ColumnDefinition Width="Auto"/>
                        <!-- Volume Slider -->
                        <ColumnDefinition Width="Auto"/>
                        <!-- Play Button -->
                        <ColumnDefinition Width="Auto"/>
                        <!-- Stop Button -->
                    </Grid.ColumnDefinitions>

                    <!-- Current Station Display -->
                    <StackPanel Grid.Column="0" VerticalAlignment="Center">
                        <TextBlock x:Name="CurrentStationName" 
                                  Text="No Station Selected" 
                                  FontSize="24" 
                                  FontWeight="Bold" 
                                  Foreground="#00BFFF" 
                                  FontFamily="Consolas"/>
                    </StackPanel>

                    <!-- Volume Control -->
                    <StackPanel Grid.Column="1" 
                               Orientation="Horizontal" 
                               VerticalAlignment="Center"
                               Margin="20,0">
                        <TextBlock Text="?? VOLUME:" 
                                  FontSize="14" 
                                  FontWeight="Bold"
                                  Foreground="#00FF00" 
                                  FontFamily="Consolas"
                                  VerticalAlignment="Center"
                                  Margin="0,0,10,0"/>

                        <Slider x:Name="VolumeSlider" 
                               Minimum="0" 
                               Maximum="1" 
                               Value="0.5"
                               Width="200"
                               TickFrequency="0.1"
                               IsSnapToTickEnabled="True"
                               ValueChanged="VolumeSlider_ValueChanged"
                               VerticalAlignment="Center"/>

                        <TextBlock x:Name="VolumePercentage" 
                                  Text="50%" 
                                  FontSize="14" 
                                  FontWeight="Bold"
                                  Foreground="#00FF00" 
                                  FontFamily="Consolas"
                                  VerticalAlignment="Center"
                                  Margin="10,0,0,0"
                                  Width="50"/>
                    </StackPanel>

                    <!-- Play Button -->
                    <Button x:Name="PlayButton" 
                           Grid.Column="2"
                           Content="? PLAY" 
                           Width="120" 
                           Height="45"
                           Margin="10,0"
                           FontSize="16"
                           FontWeight="Bold"
                           FontFamily="Consolas"
                           Click="PlayButton_Click"
                           Cursor="Hand">
                        <Button.Style>
                            <Style TargetType="Button">
                                <Setter Property="Background" Value="Transparent"/>
                                <Setter Property="Foreground" Value="#00FF00"/>
                                <Setter Property="BorderBrush" Value="#00FF00"/>
                                <Setter Property="BorderThickness" Value="2"/>
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="Button">
                                            <Border Background="{TemplateBinding Background}"
                                                   BorderBrush="{TemplateBinding BorderBrush}"
                                                   BorderThickness="{TemplateBinding BorderThickness}"
                                                   CornerRadius="5">
                                                <ContentPresenter HorizontalAlignment="Center" 
                                                                VerticalAlignment="Center"/>
                                            </Border>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                                <Style.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Background" Value="#00FF00"/>
                                        <Setter Property="Foreground" Value="#000000"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>

                    <!-- Stop Button -->
                    <Button x:Name="StopButton" 
                           Grid.Column="3"
                           Content="? STOP" 
                           Width="120" 
                           Height="45"
                           Margin="10,0"
                           FontSize="16"
                           FontWeight="Bold"
                           FontFamily="Consolas"
                           Click="StopButton_Click"
                           Cursor="Hand">
                        <Button.Style>
                            <Style TargetType="Button">
                                <Setter Property="Background" Value="Transparent"/>
                                <Setter Property="Foreground" Value="#FF0000"/>
                                <Setter Property="BorderBrush" Value="#FF0000"/>
                                <Setter Property="BorderThickness" Value="2"/>
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="Button">
                                            <Border Background="{TemplateBinding Background}"
                                                   BorderBrush="{TemplateBinding BorderBrush}"
                                                   BorderThickness="{TemplateBinding BorderThickness}"
                                                   CornerRadius="5">
                                                <ContentPresenter HorizontalAlignment="Center" 
                                                                VerticalAlignment="Center"/>
                                            </Border>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                                <Style.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Background" Value="#FF0000"/>
                                        <Setter Property="Foreground" Value="#FFFFFF"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>
                </Grid>

                <!-- Media Element (Hidden) -->
                <MediaElement x:Name="RadioPlayer" 
                             Grid.Row="0"
                             LoadedBehavior="Manual" 
                             UnloadedBehavior="Stop"
                             Volume="0.5"
                             Visibility="Collapsed"
                             MediaOpened="RadioPlayer_MediaOpened"
                             MediaFailed="RadioPlayer_MediaFailed"/>

                <!-- Upload New Station Section -->
                <Border Grid.Row="1" 
                       Background="Transparent" 
                       BorderBrush="#00FF00" 
                       BorderThickness="2" 
                       CornerRadius="5" 
                       Padding="15"
                       Margin="0,20,0,0">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <!-- Station Name Input -->
                        <TextBox x:Name="NewStationName"
                                Grid.Column="0"
                                Height="40"
                                Background="#001100"
                                Foreground="#00FF00"
                                FontFamily="Consolas"
                                FontSize="14"
                                BorderBrush="#00FF00"
                                BorderThickness="2"
                                Padding="10"
                                Margin="0,0,10,0"
                                VerticalContentAlignment="Center">
                            <TextBox.Style>
                                <Style TargetType="TextBox">
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="TextBox">
                                                <Border Background="{TemplateBinding Background}"
                                                       BorderBrush="{TemplateBinding BorderBrush}"
                                                       BorderThickness="{TemplateBinding BorderThickness}"
                                                       CornerRadius="3">
                                                    <ScrollViewer x:Name="PART_ContentHost" 
                                                                VerticalAlignment="Center"
                                                                Margin="10,0"/>
                                                </Border>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                    <Style.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="BorderBrush" Value="#00FF00"/>
                                        </Trigger>
                                        <Trigger Property="IsFocused" Value="True">
                                            <Setter Property="BorderBrush" Value="#00FF00"/>
                                            <Setter Property="Background" Value="#002200"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </TextBox.Style>
                        </TextBox>
                        
                        <!-- Placeholder text -->
                        <TextBlock Grid.Column="0"
                                  Text="Station Name"
                                  FontFamily="Consolas"
                                  FontSize="14"
                                  Foreground="#006600"
                                  Margin="15,0,0,0"
                                  VerticalAlignment="Center"
                                  IsHitTestVisible="False">
                            <TextBlock.Style>
                                <Style TargetType="TextBlock">
                                    <Setter Property="Visibility" Value="Collapsed"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Text, ElementName=NewStationName}" Value="">
                                            <Setter Property="Visibility" Value="Visible"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </TextBlock.Style>
                        </TextBlock>

                        <!-- Station URL Input -->
                        <TextBox x:Name="NewStationUrl"
                                Grid.Column="1"
                                Height="40"
                                Background="#001100"
                                Foreground="#00FF00"
                                FontFamily="Consolas"
                                FontSize="14"
                                BorderBrush="#00FF00"
                                BorderThickness="2"
                                Padding="10"
                                Margin="0,0,10,0"
                                VerticalContentAlignment="Center">
                            <TextBox.Style>
                                <Style TargetType="TextBox">
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="TextBox">
                                                <Border Background="{TemplateBinding Background}"
                                                       BorderBrush="{TemplateBinding BorderBrush}"
                                                       BorderThickness="{TemplateBinding BorderThickness}"
                                                       CornerRadius="3">
                                                    <ScrollViewer x:Name="PART_ContentHost" 
                                                                VerticalAlignment="Center"
                                                                Margin="10,0"/>
                                                </Border>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                    <Style.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="BorderBrush" Value="#00FF00"/>
                                        </Trigger>
                                        <Trigger Property="IsFocused" Value="True">
                                            <Setter Property="BorderBrush" Value="#00FF00"/>
                                            <Setter Property="Background" Value="#002200"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </TextBox.Style>
                        </TextBox>

                        <!-- Placeholder text -->
                        <TextBlock Grid.Column="1"
                                  Text="Station Listening Link URL"
                                  FontFamily="Consolas"
                                  FontSize="14"
                                  Foreground="#006600"
                                  Margin="15,0,0,0"
                                  VerticalAlignment="Center"
                                  IsHitTestVisible="False">
                            <TextBlock.Style>
                                <Style TargetType="TextBlock">
                                    <Setter Property="Visibility" Value="Collapsed"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Text, ElementName=NewStationUrl}" Value="">
                                            <Setter Property="Visibility" Value="Visible"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </TextBlock.Style>
                        </TextBlock>

                        <!-- Upload Button -->
                        <Button Grid.Column="2"
                               Content="UPLOAD"
                               Width="120"
                               Height="40"
                               FontSize="14"
                               FontWeight="Bold"
                               FontFamily="Consolas"
                               Click="UploadStation_Click"
                               Cursor="Hand">
                            <Button.Style>
                                <Style TargetType="Button">
                                    <Setter Property="Background" Value="Transparent"/>
                                    <Setter Property="Foreground" Value="#00FF00"/>
                                    <Setter Property="BorderBrush" Value="#00FF00"/>
                                    <Setter Property="BorderThickness" Value="2"/>
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="Button">
                                                <Border Background="{TemplateBinding Background}"
                                                       BorderBrush="{TemplateBinding BorderBrush}"
                                                       BorderThickness="{TemplateBinding BorderThickness}"
                                                       CornerRadius="5">
                                                    <ContentPresenter HorizontalAlignment="Center" 
                                                                    VerticalAlignment="Center"/>
                                                </Border>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                    <Style.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Background" Value="#00FF00"/>
                                            <Setter Property="Foreground" Value="#000000"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                        </Button>
                    </Grid>
                </Border>
            </Grid>
        </Border>

        <!-- ==================== AVAILABLE STATIONS GRID ==================== -->
        <Border Grid.Row="1" 
                Background="#000000" 
                BorderBrush="#00FF00" 
                BorderThickness="2" 
                CornerRadius="8" 
                Margin="20,10,20,20">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- Header -->
                <Border Grid.Row="0" 
                       Background="#000000" 
                       BorderBrush="#00FF00" 
                       BorderThickness="0,0,0,2"
                       Padding="20,15">
                    <TextBlock Text="?? AVAILABLE RADIO STATIONS" 
                              FontSize="20" 
                              FontWeight="Bold" 
                              Foreground="#00FF00" 
                              FontFamily="Consolas"
                              HorizontalAlignment="Center"/>
                </Border>

                <!-- Station Grid -->
                <ScrollViewer Grid.Row="1" 
                             VerticalScrollBarVisibility="Auto"
                             Padding="20">
                    <ItemsControl x:Name="StationsItemsControl">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <UniformGrid Columns="2" HorizontalAlignment="Stretch"/>
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Border Background="#001100"
                                       BorderBrush="#00FF00"
                                       BorderThickness="2"
                                       CornerRadius="8"
                                       Margin="10"
                                       Padding="20">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>

                                        <!-- Station Info -->
                                        <StackPanel Grid.Column="0" VerticalAlignment="Center">
                                            <TextBlock FontSize="18" 
                                                      FontWeight="Bold" 
                                                      Foreground="#00FF00" 
                                                      FontFamily="Consolas"
                                                      Margin="0,0,0,5">
                                                <Run Text="{Binding Name}"/>
                                                <Run Text=" - " Foreground="#006600"/>
                                            </TextBlock>
                                            <TextBlock Text="{Binding StreamUrl}" 
                                                      FontSize="12" 
                                                      Foreground="#00BFFF" 
                                                      FontFamily="Consolas"
                                                      TextTrimming="CharacterEllipsis"/>
                                        </StackPanel>

                                        <!-- Play Button -->
                                        <Button Grid.Column="1"
                                               Content="? PLAY"
                                               Width="100"
                                               Height="40"
                                               FontSize="14"
                                               FontWeight="Bold"
                                               FontFamily="Consolas"
                                               Tag="{Binding}"
                                               Click="StationPlayButton_Click"
                                               Cursor="Hand">
                                            <Button.Style>
                                                <Style TargetType="Button">
                                                    <Setter Property="Background" Value="Transparent"/>
                                                    <Setter Property="Foreground" Value="#00FF00"/>
                                                    <Setter Property="BorderBrush" Value="#00FF00"/>
                                                    <Setter Property="BorderThickness" Value="2"/>
                                                    <Setter Property="Template">
                                                        <Setter.Value>
                                                            <ControlTemplate TargetType="Button">
                                                                <Border Background="{TemplateBinding Background}"
                                                                       BorderBrush="{TemplateBinding BorderBrush}"
                                                                       BorderThickness="{TemplateBinding BorderThickness}"
                                                                       CornerRadius="5">
                                                                    <ContentPresenter HorizontalAlignment="Center" 
                                                                                    VerticalAlignment="Center"/>
                                                                </Border>
                                                            </ControlTemplate>
                                                        </Setter.Value>
                                                    </Setter>
                                                    <Style.Triggers>
                                                        <Trigger Property="IsMouseOver" Value="True">
                                                            <Setter Property="Background" Value="#00FF00"/>
                                                            <Setter Property="Foreground" Value="#000000"/>
                                                        </Trigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </Button.Style>
                                        </Button>
                                    </Grid>
                                </Border>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </ScrollViewer>
            </Grid>
        </Border>
    </Grid>
</UserControl>
