<UserControl x:Class="DJBookingSystem.Controls.ClaudeIndicator"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Width="70" Height="90">
    
    <UserControl.Resources>
        <!-- Glow animation for connection status -->
        <Storyboard x:Key="GlowAnimation" RepeatBehavior="Forever">
            <DoubleAnimation Storyboard.TargetName="OuterGlow"
                           Storyboard.TargetProperty="Opacity"
                           From="0.4" To="1.0" Duration="0:0:1.5"
                           AutoReverse="True"/>
        </Storyboard>
        
        <!-- Blinking eyes animation -->
        <Storyboard x:Key="BlinkAnimation" RepeatBehavior="Forever">
            <!-- Left eye blink -->
            <DoubleAnimation Storyboard.TargetName="LeftEye"
                           Storyboard.TargetProperty="Height"
                           From="4" To="0.5" Duration="0:0:0.15"
                           AutoReverse="True"
                           BeginTime="0:0:3"/>
            <DoubleAnimation Storyboard.TargetName="LeftEye"
                           Storyboard.TargetProperty="Height"
                           From="4" To="0.5" Duration="0:0:0.15"
                           AutoReverse="True"
                           BeginTime="0:0:5.5"/>
            
            <!-- Right eye blink -->
            <DoubleAnimation Storyboard.TargetName="RightEye"
                           Storyboard.TargetProperty="Height"
                           From="4" To="0.5" Duration="0:0:0.15"
                           AutoReverse="True"
                           BeginTime="0:0:3"/>
            <DoubleAnimation Storyboard.TargetName="RightEye"
                           Storyboard.TargetProperty="Height"
                           From="4" To="0.5" Duration="0:0:0.15"
                           AutoReverse="True"
                           BeginTime="0:0:5.5"/>
        </Storyboard>
        
        <!-- Amber flash animation for polling -->
        <Storyboard x:Key="AmberFlashAnimation">
            <!-- Flash to amber -->
            <ColorAnimation Storyboard.TargetName="OuterGlowBrush"
                          Storyboard.TargetProperty="Color"
                          To="#FFA500"
                          Duration="0:0:0.2"/>
            <ColorAnimation Storyboard.TargetName="MainCircleBrush"
                          Storyboard.TargetProperty="Color"
                          To="#FFA500"
                          Duration="0:0:0.2"/>
            <ColorAnimation Storyboard.TargetName="LeftEyeBrush"
                          Storyboard.TargetProperty="Color"
                          To="#FFA500"
                          Duration="0:0:0.2"/>
            <ColorAnimation Storyboard.TargetName="RightEyeBrush"
                          Storyboard.TargetProperty="Color"
                          To="#FFA500"
                          Duration="0:0:0.2"/>
            <ColorAnimation Storyboard.TargetName="SmilePathBrush"
                          Storyboard.TargetProperty="Color"
                          To="#FFA500"
                          Duration="0:0:0.2"/>
            
            <!-- Flash back to original color -->
            <ColorAnimation Storyboard.TargetName="OuterGlowBrush"
                          Storyboard.TargetProperty="Color"
                          Duration="0:0:0.2"
                          BeginTime="0:0:0.3"/>
            <ColorAnimation Storyboard.TargetName="MainCircleBrush"
                          Storyboard.TargetProperty="Color"
                          Duration="0:0:0.2"
                          BeginTime="0:0:0.3"/>
            <ColorAnimation Storyboard.TargetName="LeftEyeBrush"
                          Storyboard.TargetProperty="Color"
                          Duration="0:0:0.2"
                          BeginTime="0:0:0.3"/>
            <ColorAnimation Storyboard.TargetName="RightEyeBrush"
                          Storyboard.TargetProperty="Color"
                          Duration="0:0:0.2"
                          BeginTime="0:0:0.3"/>
            <ColorAnimation Storyboard.TargetName="SmilePathBrush"
                          Storyboard.TargetProperty="Color"
                          Duration="0:0:0.2"
                          BeginTime="0:0:0.3"/>
        </Storyboard>
    </UserControl.Resources>
    
    <StackPanel HorizontalAlignment="Center">
        <!-- Hanging chain from top -->
        <Rectangle Width="2" Height="15"
                   Fill="#555555"
                   HorizontalAlignment="Center"
                   Margin="0,0,0,2">
            <Rectangle.Effect>
                <DropShadowEffect Color="#AAAAAA" BlurRadius="3" ShadowDepth="0" Opacity="0.5"/>
            </Rectangle.Effect>
        </Rectangle>
        
        <!-- Hook/connector -->
        <Ellipse Width="6" Height="6"
                 Fill="#777777"
                 Stroke="#999999"
                 StrokeThickness="1"
                 HorizontalAlignment="Center"
                 Margin="0,0,0,2"/>
        
        <!-- Claude Face Indicator -->
        <Grid Width="50" Height="50">
            <!-- Outer glow circle -->
            <Ellipse x:Name="OuterGlow"
                     Width="50" Height="50"
                     StrokeThickness="2"
                     Opacity="0.6">
                <Ellipse.Stroke>
                    <SolidColorBrush x:Name="OuterGlowBrush" Color="{Binding StatusColorValue, RelativeSource={RelativeSource AncestorType=UserControl}}"/>
                </Ellipse.Stroke>
                <Ellipse.Effect>
                    <DropShadowEffect x:Name="GlowEffect"
                                    Color="{Binding StatusColorValue, RelativeSource={RelativeSource AncestorType=UserControl}}" 
                                    BlurRadius="20" 
                                    ShadowDepth="0"/>
                </Ellipse.Effect>
            </Ellipse>
            
            <!-- Main circle border -->
            <Ellipse Width="46" Height="46"
                     StrokeThickness="3"
                     Fill="#000000">
                <Ellipse.Stroke>
                    <SolidColorBrush x:Name="MainCircleBrush" Color="{Binding StatusColorValue, RelativeSource={RelativeSource AncestorType=UserControl}}"/>
                </Ellipse.Stroke>
            </Ellipse>
            
            <!-- Smiley face -->
            <Canvas Width="46" Height="46">
                <!-- Left eye with blinking -->
                <Ellipse x:Name="LeftEye"
                         Canvas.Left="13" 
                         Canvas.Top="16"
                         Width="5" 
                         Height="4">
                    <Ellipse.Fill>
                        <SolidColorBrush x:Name="LeftEyeBrush" Color="{Binding StatusColorValue, RelativeSource={RelativeSource AncestorType=UserControl}}"/>
                    </Ellipse.Fill>
                </Ellipse>
                
                <!-- Right eye with blinking -->
                <Ellipse x:Name="RightEye"
                         Canvas.Left="28" 
                         Canvas.Top="16"
                         Width="5" 
                         Height="4">
                    <Ellipse.Fill>
                        <SolidColorBrush x:Name="RightEyeBrush" Color="{Binding StatusColorValue, RelativeSource={RelativeSource AncestorType=UserControl}}"/>
                    </Ellipse.Fill>
                </Ellipse>
                
                <!-- Smile curve (or frown when disconnected) -->
                <Path x:Name="SmilePath"
                      StrokeThickness="2.5"
                      Data="M 13,28 Q 23,35 33,28">
                    <Path.Stroke>
                        <SolidColorBrush x:Name="SmilePathBrush" Color="{Binding StatusColorValue, RelativeSource={RelativeSource AncestorType=UserControl}}"/>
                    </Path.Stroke>
                    <Path.Effect>
                        <DropShadowEffect Color="{Binding StatusColorValue, RelativeSource={RelativeSource AncestorType=UserControl}}" 
                                        BlurRadius="5" 
                                        ShadowDepth="0"
                                        Opacity="0.8"/>
                    </Path.Effect>
                </Path>
            </Canvas>
            
            <!-- Tooltip showing service info -->
            <Grid.ToolTip>
                <ToolTip Background="#0A0A0A" 
                         BorderBrush="{Binding StatusColor, RelativeSource={RelativeSource AncestorType=UserControl}}"
                         BorderThickness="2"
                         Foreground="{Binding StatusColor, RelativeSource={RelativeSource AncestorType=UserControl}}"
                         FontFamily="Consolas"
                         FontSize="12">
                    <StackPanel>
                        <TextBlock Text="{Binding ServiceName, RelativeSource={RelativeSource AncestorType=UserControl}}" FontWeight="Bold"/>
                        <TextBlock Text="{Binding StatusText, RelativeSource={RelativeSource AncestorType=UserControl}}"/>
                    </StackPanel>
                </ToolTip>
            </Grid.ToolTip>
        </Grid>
        
        <!-- Service Label -->
        <TextBlock Text="{Binding LabelText, RelativeSource={RelativeSource AncestorType=UserControl}}"
                   Foreground="{Binding StatusColor, RelativeSource={RelativeSource AncestorType=UserControl}}"
                   FontFamily="Consolas"
                   FontSize="10"
                   FontWeight="Bold"
                   HorizontalAlignment="Center"
                   Margin="0,4,0,0"
                   TextAlignment="Center">
            <TextBlock.Effect>
                <DropShadowEffect Color="{Binding StatusColorValue, RelativeSource={RelativeSource AncestorType=UserControl}}" 
                                BlurRadius="5" 
                                ShadowDepth="0"
                                Opacity="0.6"/>
            </TextBlock.Effect>
        </TextBlock>
    </StackPanel>
    
    <UserControl.Triggers>
        <EventTrigger RoutedEvent="Loaded">
            <BeginStoryboard Storyboard="{StaticResource GlowAnimation}"/>
            <BeginStoryboard Storyboard="{StaticResource BlinkAnimation}"/>
        </EventTrigger>
    </UserControl.Triggers>
</UserControl>
