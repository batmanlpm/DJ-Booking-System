<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Fallen Collective - DJ Booking System</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        :root {
            --space-black: #0a0a0a;
            --deep-space: #1a1a2e;
            --dark-panel: #16213e;
            --darker-panel: #0f1724;
            --accent: #00ff41;
            --accent-dark: #00cc33;
            --candy: #FF69B4;
            --error: #ff0040;
            --warning: #ffaa00;
            --cyan: #00BFFF;
            --magenta: #FF00FF;
        }

        body {
            font-family: 'Consolas', monospace;
            background: linear-gradient(135deg, var(--space-black) 0%, var(--deep-space) 30%, var(--dark-panel) 60%, #240046 100%);
            background-attachment: fixed;
            color: var(--accent);
            min-height: 100vh;
        }

        @keyframes neonGlow {
            0%, 100% { filter: drop-shadow(0 0 5px var(--accent)) drop-shadow(0 0 15px var(--accent)); }
            50% { filter: drop-shadow(0 0 10px var(--accent)) drop-shadow(0 0 25px var(--accent)); }
        }

        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.6; } }
        @keyframes float { 0%, 100% { transform: translateY(0px) rotate(0deg); } 50% { transform: translateY(-10px) rotate(5deg); } }

        .header {
            background: var(--space-black);
            border-bottom: 2px solid var(--accent);
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 5px 30px rgba(0, 255, 65, 0.4);
        }

        .claude-indicators {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-bottom: 15px;
        }

        .claude-indicator {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }

        .claude-face {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid var(--accent);
            background: var(--darker-panel);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            transition: all 0.3s;
        }

        .claude-face.connected { border-color: var(--accent); box-shadow: 0 0 15px rgba(0, 255, 65, 0.6); }
        .claude-face.disconnected { border-color: var(--error); box-shadow: 0 0 15px rgba(255, 0, 64, 0.6); }
        .claude-face.connected::before { content: '‚ò∫'; }
        .claude-face.disconnected::before { content: '‚òπ'; }

        .claude-label { font-size: 10px; font-weight: bold; }

        .logo-section { text-align: center; margin: 20px 0; }
        .logo-title {
            font-size: 28px;
            font-weight: bold;
            color: var(--cyan);
            animation: neonGlow 3s infinite;
        }
        .logo-subtitle { font-size: 12px; color: var(--accent); margin-top: 5px; }

        .support-bar {
            text-align: center;
            padding: 8px;
            background: var(--space-black);
            border-top: 2px solid var(--magenta);
            border-bottom: 2px solid var(--magenta);
            font-size: 10px;
            color: var(--magenta);
        }

        .main-menu {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            background: var(--space-black);
            border-bottom: 2px solid var(--accent);
        }

        .menu-item {
            padding: 12px 20px;
            color: var(--accent);
            font-weight: bold;
            cursor: pointer;
            border: none;
            background: transparent;
            font-family: 'Consolas', monospace;
            font-size: 13px;
            transition: all 0.3s;
        }

        .menu-item:hover { background: var(--darker-panel); }

        .container { max-width: 1600px; margin: 0 auto; padding: 20px; }

        .panel {
            background: var(--deep-space);
            border: 2px solid var(--accent);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 0 20px rgba(0, 255, 65, 0.3);
        }

        .panel-title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 20px;
            color: var(--cyan);
            border-bottom: 2px solid var(--accent);
            padding-bottom: 10px;
        }

        .form-group { margin: 20px 0; }
        .form-label { display: block; margin-bottom: 8px; font-size: 14px; font-weight: bold; }
        .form-input, .form-select, .form-textarea {
            width: 100%;
            padding: 12px;
            background: var(--darker-panel);
            border: 2px solid var(--accent);
            border-radius: 5px;
            color: var(--accent);
            font-family: 'Consolas', monospace;
            font-size: 14px;
        }

        .form-input:focus, .form-select:focus { outline: none; box-shadow: 0 0 15px rgba(0, 255, 65, 0.5); }

        .btn {
            padding: 12px 25px;
            background: var(--deep-space);
            border: 2px solid var(--accent);
            border-radius: 5px;
            color: var(--accent);
            font-family: 'Consolas', monospace;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn:hover {
            background: var(--accent);
            color: var(--space-black);
            box-shadow: 0 0 25px var(--accent);
            transform: translateY(-2px);
        }

        .btn-primary { background: var(--accent); color: var(--space-black); }
        .btn-danger { border-color: var(--error); color: var(--error); }
        .btn-danger:hover { background: var(--error); color: white; }
        .btn-small { padding: 6px 15px; font-size: 12px; }

        .data-table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        .data-table th {
            background: var(--darker-panel);
            border: 2px solid var(--accent);
            padding: 12px;
            text-align: left;
            font-weight: bold;
        }
        .data-table td { border: 1px solid var(--accent-dark); padding: 12px; }
        .data-table tr:hover { background: var(--dark-panel); }

        .status-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: bold;
        }

        .status-confirmed { background: var(--accent); color: var(--space-black); }
        .status-pending { background: var(--warning); color: var(--space-black); }
        .status-live { background: var(--error); color: white; animation: pulse 2s infinite; }

        .radio-player {
            background: var(--space-black);
            border: 2px solid var(--accent);
            border-radius: 8px;
            padding: 25px;
            box-shadow: 0 0 30px rgba(0, 255, 65, 0.4);
        }

        .player-title {
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            animation: neonGlow 3s infinite;
            margin-bottom: 15px;
        }

        .player-controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
        }

        .player-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--deep-space);
            border: 3px solid var(--accent);
            color: var(--accent);
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .player-btn:hover {
            background: var(--accent);
            color: var(--space-black);
            box-shadow: 0 0 25px var(--accent);
            transform: scale(1.1);
        }

        .volume-control {
            display: flex;
            align-items: center;
            gap: 15px;
            justify-content: center;
            margin-top: 15px;
        }

        .volume-slider {
            width: 200px;
            height: 6px;
            border-radius: 3px;
            background: var(--darker-panel);
            outline: none;
            -webkit-appearance: none;
        }

        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: var(--accent);
            cursor: pointer;
            box-shadow: 0 0 10px var(--accent);
        }

        .candybot-widget { position: fixed; bottom: 30px; right: 30px; z-index: 10000; }

        .candybot-toggle {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--candy), #ff1493);
            border: 4px solid var(--accent);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            box-shadow: 0 0 30px rgba(255, 105, 180, 0.6);
            animation: float 3s ease-in-out infinite;
        }

        .candybot-toggle:hover { transform: scale(1.1) rotate(10deg); }

        .candybot-window {
            position: fixed;
            bottom: 130px;
            right: 30px;
            width: 400px;
            height: 600px;
            background: var(--deep-space);
            border: 3px solid var(--candy);
            border-radius: 15px;
            box-shadow: 0 0 40px rgba(255, 105, 180, 0.5);
            display: none;
            flex-direction: column;
        }

        .candybot-window.active { display: flex; }

        .candybot-header {
            background: linear-gradient(135deg, var(--candy), #ff1493);
            padding: 15px;
            border-radius: 12px 12px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: white;
            font-weight: bold;
        }

        .candybot-close {
            cursor: pointer;
            font-size: 24px;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
        }

        .candybot-messages {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
            background: var(--space-black);
        }

        .candybot-message {
            margin: 10px 0;
            padding: 12px;
            border-radius: 10px;
            max-width: 80%;
        }

        .candybot-message.user {
            background: var(--dark-panel);
            border-left: 4px solid var(--accent);
            margin-left: auto;
        }

        .candybot-message.bot {
            background: rgba(255, 105, 180, 0.1);
            border-left: 4px solid var(--candy);
        }

        .quick-actions {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            padding: 15px;
            background: var(--darker-panel);
        }

        .quick-action-btn {
            padding: 8px 15px;
            background: var(--dark-panel);
            border: 2px solid var(--candy);
            border-radius: 15px;
            color: var(--candy);
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .quick-action-btn:hover { background: var(--candy); color: white; }

        .venue-card {
            background: var(--darker-panel);
            border: 2px solid var(--accent);
            border-radius: 8px;
            padding: 20px;
            transition: all 0.3s;
        }

        .venue-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 255, 65, 0.4);
        }

        .venue-name {
            font-size: 20px;
            font-weight: bold;
            color: var(--cyan);
            margin-bottom: 10px;
        }

        .grid-3 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .memorial {
            text-align: center;
            padding: 40px 20px;
            border-top: 2px solid var(--accent);
            margin-top: 60px;
            background: var(--space-black);
        }

        .memorial-title {
            font-size: 24px;
            color: var(--candy);
            margin-bottom: 15px;
            animation: neonGlow 3s infinite;
        }

        .memorial-text {
            font-size: 14px;
            line-height: 2;
            opacity: 0.9;
        }

        .hidden { display: none !important; }
        .loading { text-align: center; padding: 40px; font-size: 18px; opacity: 0.8; }

        @media (max-width: 768px) {
            .claude-indicators { gap: 20px; }
            .candybot-window { width: 90%; right: 5%; }
            .grid-3 { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <div class="claude-indicators">
                <div class="claude-indicator">
                    <div class="claude-face connected" id="cosmosIndicator"></div>
                    <div class="claude-label">Cosmos</div>
                </div>
                <div class="claude-indicator">
                    <div class="claude-face connected" id="lpmIndicator"></div>
                    <div class="claude-label">LPM.fm</div>
                </div>
                <div class="claude-indicator">
                    <div class="claude-face connected" id="bookingIndicator"></div>
                    <div class="claude-label">Booking</div>
                </div>
                <div class="claude-indicator">
                    <div class="claude-face connected" id="streamIndicator"></div>
                    <div class="claude-label">Live Status</div>
                </div>
            </div>
            <div class="logo-section">
                <div class="logo-title">‚ö°‚ö° THE FALLEN COLLECTIVE ‚ö°‚ö°</div>
                <div class="logo-subtitle">DJ BOOKING SYSTEM</div>
            </div>
        </div>
    </header>

    <div class="support-bar">SUPPORTED BY: THE FALLEN COLLECTIVE</div>

    <nav class="main-menu">
        <button class="menu-item" onclick="showSection('bookings')">Bookings</button>
        <button class="menu-item" onclick="showSection('venues')">Venues</button>
        <button class="menu-item" onclick="showSection('radio')">Radio</button>
        <button class="menu-item" onclick="showSection('help')">Help</button>
    </nav>

    <div class="container">
        <!-- BOOKINGS SECTION -->
        <div id="section-bookings" class="content-section">
            <div class="panel">
                <h2 class="panel-title">üìÖ DJ Bookings</h2>
                
                <div class="form-group">
                    <label class="form-label">Select Venue</label>
                    <select class="form-select" id="bookingVenue"></select>
                </div>

                <div class="form-group">
                    <label class="form-label">Select Date</label>
                    <input type="date" class="form-input" id="bookingDate">
                </div>

                <div class="form-group">
                    <label class="form-label">Time (1-hour slots)</label>
                    <select class="form-select" id="bookingTime">
                        <option value="">Choose Time</option>
                        <option value="20:00">20:00 (8 PM)</option>
                        <option value="21:00">21:00 (9 PM)</option>
                        <option value="22:00">22:00 (10 PM)</option>
                        <option value="23:00">23:00 (11 PM)</option>
                        <option value="00:00">00:00 (Midnight)</option>
                        <option value="01:00">01:00 (1 AM)</option>
                        <option value="02:00">02:00 (2 AM)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">DJ Name</label>
                    <input type="text" class="form-input" id="djName" placeholder="Your DJ name">
                </div>

                <div class="form-group">
                    <label class="form-label">Streaming Link (optional)</label>
                    <input type="url" class="form-input" id="streamingLink" placeholder="https://twitch.tv/yourname">
                </div>

                <button class="btn btn-primary" onclick="createBooking()">üéµüéµ BOOK SLOT üéµüéµ</button>

                <h3 style="margin-top: 40px; color: var(--cyan);">Your Bookings</h3>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Time</th>
                            <th>DJ Name</th>
                            <th>Venue</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="bookingsTable">
                        <tr><td colspan="6" class="loading">Loading bookings...</td></tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- VENUES SECTION -->
        <div id="section-venues" class="content-section hidden">
            <div class="panel">
                <h2 class="panel-title">üè¢ Available Venues</h2>
                <div id="venuesGrid" class="grid-3">
                    <div class="loading">Loading venues...</div>
                </div>
            </div>
        </div>

        <!-- RADIO SECTION -->
        <div id="section-radio" class="content-section hidden">
            <div class="radio-player">
                <div class="player-title">üî¥ LIVE: The Fallen Collective Radio</div>
                <div style="text-align: center; margin: 20px 0; opacity: 0.8;">
                    <div id="nowPlaying">LPM Station 1</div>
                </div>
                <div class="player-controls">
                    <button class="player-btn" id="playBtn" onclick="RadioPlayer.toggle()">‚ñ∂</button>
                </div>
                <div class="volume-control">
                    <span>üîä</span>
                    <input type="range" class="volume-slider" id="volumeSlider" 
                           min="0" max="100" value="30" 
                           oninput="RadioPlayer.setVolume(this.value / 100)">
                    <span id="volumeText">30%</span>
                </div>
            </div>
        </div>

        <!-- HELP SECTION -->
        <div id="section-help" class="content-section hidden">
            <div class="panel">
                <h2 class="panel-title">‚ùì Help & Support</h2>
                <div style="line-height: 2;">
                    <h3 style="color: var(--cyan); margin: 20px 0;">Getting Started</h3>
                    <p>‚Ä¢ Select a venue from the dropdown<br>
                    ‚Ä¢ Pick your date and time<br>
                    ‚Ä¢ Enter your DJ name<br>
                    ‚Ä¢ Click "BOOK SLOT"</p>

                    <h3 style="color: var(--cyan); margin: 20px 0;">Candy-Bot Assistant</h3>
                    <p>Click the üç¨ in the bottom-right corner for instant help!</p>

                    <h3 style="color: var(--cyan); margin: 20px 0;">Contact</h3>
                    <p>Email: support@livepartymusic.fm<br>
                    Website: <a href="https://livepartymusic.fm" style="color: var(--accent);">livepartymusic.fm</a></p>
                </div>
            </div>
        </div>
    </div>

    <div class="memorial">
        <div class="memorial-title">üí´ In Loving Memory of DJCANDY üí´</div>
        <div class="memorial-text">
            Candy Fraser (DJCANDY) - Founder of LivePartyMusic.fm<br>
            "To Help Others Find Their Voices"<br>
            Forever in our hearts - A coder, DJ, and songwriter gone too soon at 21<br>
            This system continues her legacy üéµ
        </div>
    </div>

    <!-- Candy-Bot Widget -->
    <div class="candybot-widget">
        <div class="candybot-toggle" onclick="toggleCandyBot()">üç¨</div>
        <div class="candybot-window" id="candybotWindow">
            <div class="candybot-header">
                <span>üç¨ Candy-Bot</span>
                <div class="candybot-close" onclick="toggleCandyBot()">√ó</div>
            </div>
            <div class="quick-actions">
                <button class="quick-action-btn" onclick="askBot('How do I book?')">üìÖ Book</button>
                <button class="quick-action-btn" onclick="askBot('Show venues')">üè¢ Venues</button>
                <button class="quick-action-btn" onclick="askBot('DJ tips')">üí° Tips</button>
            </div>
            <div class="candybot-messages" id="candybotMessages">
                <div class="candybot-message bot">
                    <div style="font-weight: bold; color: #FF69B4; margin-bottom: 5px;">üç¨ Candy-Bot</div>
                    <div>Hi! I'm here to help with bookings, venues, and DJ tips! üéµ</div>
                </div>
            </div>
            <div style="padding: 15px; background: var(--darker-panel); border-top: 2px solid var(--candy);">
                <div style="display: flex; gap: 10px;">
                    <input type="text" 
                           style="flex: 1; padding: 10px; background: var(--space-black); border: 2px solid var(--candy); border-radius: 20px; color: var(--accent); font-family: 'Consolas', monospace;"
                           id="candybotInput" 
                           placeholder="Ask me..."
                           onkeypress="if(event.key==='Enter') sendBot()">
                    <button style="width: 40px; height: 40px; border-radius: 50%; background: var(--candy); border: none; color: white; font-size: 18px; cursor: pointer;" 
                            onclick="sendBot()">‚ñ∂</button>
                </div>
            </div>
        </div>
    </div>

    <audio id="radioStream" preload="none"></audio>

    <script>
        const API = 'http://localhost:7071/api'; // Change to your deployed URL
        const STATIONS = {
            lpm1: 'https://c40.radioboss.fm/stream/98',
            lpm2: 'https://c19.radioboss.fm/stream/162'
        };

        let currentUser = { username: 'Demo User' };
        let bookings = [];
        let venues = [];

        // Radio Player
        const RadioPlayer = {
            audio: null,
            isPlaying: false,
            init() {
                this.audio = document.getElementById('radioStream');
                this.audio.volume = 0.3;
                this.audio.src = STATIONS.lpm1;
                setTimeout(() => this.play(), 1000);
            },
            play() {
                this.audio.play().then(() => {
                    this.isPlaying = true;
                    this.updateUI();
                }).catch(() => {});
            },
            pause() {
                this.audio.pause();
                this.isPlaying = false;
                this.updateUI();
            },
            toggle() { this.isPlaying ? this.pause() : this.play(); },
            setVolume(v) {
                this.audio.volume = v;
                this.updateUI();
            },
            updateUI() {
                document.getElementById('playBtn').textContent = this.isPlaying ? '‚è∏' : '‚ñ∂';
                document.getElementById('volumeText').textContent = Math.round(this.audio.volume * 100) + '%';
            }
        };

        // API Functions
        async function loadVenues() {
            try {
                const res = await fetch(`${API}/venues`);
                venues = await res.json();
                
                const select = document.getElementById('bookingVenue');
                select.innerHTML = '<option value="">Choose Venue</option>' + 
                    venues.map(v => `<option value="${v.id}">${v.roomName}</option>`).join('');
                
                const grid = document.getElementById('venuesGrid');
                grid.innerHTML = venues.map(v => `
                    <div class="venue-card">
                        <div class="venue-name">${v.roomName}</div>
                        <div style="font-size: 14px; margin: 10px 0;">${v.roomDescription || ''}</div>
                        <div style="font-size: 12px; color: var(--warning);">‚è∞ ${v.openingHours || 'Check venue'}</div>
                        <span class="status-badge status-confirmed">‚úì Open</span>
                    </div>
                `).join('');
            } catch (err) {
                console.error('Load venues error:', err);
            }
        }

        async function loadBookings() {
            try {
                const res = await fetch(`${API}/bookings`);
                bookings = await res.json();
                
                const tbody = document.getElementById('bookingsTable');
                tbody.innerHTML = bookings.length ? bookings.map(b => `
                    <tr>
                        <td>${b.bookingDate?.split('T')[0] || 'N/A'}</td>
                        <td>${b.bookingDate?.split('T')[1]?.substring(0,5) || 'N/A'}</td>
                        <td>${b.djName}</td>
                        <td>${venues.find(v => v.id === b.venue)?.roomName || b.venue}</td>
                        <td><span class="status-badge status-confirmed">Confirmed</span></td>
                        <td>
                            <button class="btn btn-small btn-danger" onclick="deleteBooking('${b.id}')">Delete</button>
                        </td>
                    </tr>
                `).join('') : '<tr><td colspan="6" style="text-align: center;">No bookings yet</td></tr>';
            } catch (err) {
                console.error('Load bookings error:', err);
                document.getElementById('bookingsTable').innerHTML = '<tr><td colspan="6">Error loading bookings</td></tr>';
            }
        }

        async function createBooking() {
            const booking = {
                venue: document.getElementById('bookingVenue').value,
                bookingDate: document.getElementById('bookingDate').value + 'T' + document.getElementById('bookingTime').value,
                djName: document.getElementById('djName').value,
                streamingLink: document.getElementById('streamingLink').value
            };

            if (!booking.venue || !booking.bookingDate || !booking.djName) {
                alert('Please fill in venue, date, time, and DJ name!');
                return;
            }

            try {
                const res = await fetch(`${API}/bookings`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(booking)
                });
                
                if (res.ok) {
                    alert('‚úÖ Booking created!');
                    loadBookings();
                    document.getElementById('djName').value = '';
                    document.getElementById('streamingLink').value = '';
                }
            } catch (err) {
                alert('Error creating booking: ' + err.message);
            }
        }

        async function deleteBooking(id) {
            if (!confirm('Delete this booking?')) return;
            
            try {
                await fetch(`${API}/bookings/${id}`, { method: 'DELETE' });
                loadBookings();
            } catch (err) {
                alert('Error deleting: ' + err.message);
            }
        }

        // Navigation
        function showSection(name) {
            document.querySelectorAll('.content-section').forEach(s => s.classList.add('hidden'));
            document.getElementById('section-' + name).classList.remove('hidden');
        }

        // Candy-Bot
        function toggleCandyBot() {
            document.getElementById('candybotWindow').classList.toggle('active');
        }

        function askBot(msg) { addMsg(msg, 'user'); setTimeout(() => addMsg(botResponse(msg), 'bot'), 500); }
        function sendBot() {
            const input = document.getElementById('candybotInput');
            if (input.value.trim()) {
                askBot(input.value);
                input.value = '';
            }
        }

        function addMsg(text, sender) {
            const div = document.createElement('div');
            div.className = `candybot-message ${sender}`;
            div.innerHTML = `<div style="font-weight: bold; color: ${sender === 'bot' ? '#FF69B4' : '#00ff41'}; margin-bottom: 5px;">${sender === 'bot' ? 'üç¨ Candy-Bot' : 'You'}</div><div>${text}</div>`;
            document.getElementById('candybotMessages').appendChild(div);
            document.getElementById('candybotMessages').scrollTop = 999999;
        }

        function botResponse(msg) {
            const m = msg.toLowerCase();
            if (m.includes('book')) return "Click 'Bookings' in the menu, fill in venue, date, time, and your DJ name, then click BOOK SLOT! üéµ";
            if (m.includes('venue')) return "Click 'Venues' to see all available spots! Each has different vibes! üè¢";
            if (m.includes('tip')) return "DJ tips: 1) Read the crowd 2) Have backups 3) Practice transitions 4) Have fun! üéµ";
            return "I can help with bookings, venues, and DJ tips! What do you need? üç¨";
        }

        // Init
        window.addEventListener('DOMContentLoaded', () => {
            RadioPlayer.init();
            loadVenues().then(() => loadBookings());
            setInterval(() => {
                document.getElementById('cosmosIndicator').className = 'claude-face connected';
                document.getElementById('lpmIndicator').className = 'claude-face connected';
                document.getElementById('bookingIndicator').className = 'claude-face connected';
                document.getElementById('streamIndicator').className = 'claude-face connected';
            }, 1000);
        });
    </script>
</body>
</html>
